{
  "version": 3,
  "sources": ["../bundle-9kgNdD/checked-fetch.js", "../../../src/skills/textSkill.ts", "../../../src/skills/multimodalSkill.ts", "../../../src/skills/index.ts", "../../../src/mcp/client.ts", "../../../src/utils/id.ts", "../../../src/core/taskManager.ts", "../../../src/index.ts", "../../../../../node_modules/.pnpm/wrangler@4.60.0/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../../../node_modules/.pnpm/wrangler@4.60.0/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-9kgNdD/middleware-insertion-facade.js", "../../../../../node_modules/.pnpm/wrangler@4.60.0/node_modules/wrangler/templates/middleware/common.ts", "../bundle-9kgNdD/middleware-loader.entry.ts"],
  "sourceRoot": "C:\\Users\\hulian\\Desktop\\huliang\\ai-tool-chat\\packages\\worker\\.wrangler\\tmp\\dev-a6ff7l",
  "sourcesContent": ["const urls = new Set();\n\nfunction checkURL(request, init) {\n\tconst url =\n\t\trequest instanceof URL\n\t\t\t? request\n\t\t\t: new URL(\n\t\t\t\t\t(typeof request === \"string\"\n\t\t\t\t\t\t? new Request(request, init)\n\t\t\t\t\t\t: request\n\t\t\t\t\t).url\n\t\t\t\t);\n\tif (url.port && url.port !== \"443\" && url.protocol === \"https:\") {\n\t\tif (!urls.has(url.toString())) {\n\t\t\turls.add(url.toString());\n\t\t\tconsole.warn(\n\t\t\t\t`WARNING: known issue with \\`fetch()\\` requests to custom HTTPS ports in published Workers:\\n` +\n\t\t\t\t\t` - ${url.toString()} - the custom port will be ignored when the Worker is published using the \\`wrangler deploy\\` command.\\n`\n\t\t\t);\n\t\t}\n\t}\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\tconst [request, init] = argArray;\n\t\tcheckURL(request, init);\n\t\treturn Reflect.apply(target, thisArg, argArray);\n\t},\n});\n", "/**\n * \u6587\u672C Skill - \u57FA\u4E8E DeepSeek\n * \u5904\u7406\u7EAF\u6587\u672C\u5BF9\u8BDD\n */\nimport type {\n  Skill,\n  SkillInput,\n  SkillContext,\n  SkillStreamChunk,\n  Message,\n  ToolCall,\n} from \"../types\";\n\nexport const textSkill: Skill = {\n  name: \"text-chat\",\n  type: \"text\",\n  description: \"\u57FA\u4E8E DeepSeek \u7684\u6587\u672C\u5BF9\u8BDD\u6280\u80FD\",\n\n  async *execute(\n    input: SkillInput,\n    context: SkillContext,\n  ): AsyncIterable<SkillStreamChunk> {\n    const { env, mcpClient } = context;\n    const { messages, temperature = 0.7 } = input;\n    const tools = mcpClient.listTools();\n    const toolsDescription =\n      tools.length > 0\n        ? `You can use tools by responding exactly with: <tool>${JSON.stringify(\n            {\n              tool: \"tool_name\",\n              arguments: {},\n            },\n          )}</tool>\\nAvailable tools:\\n${tools\n            .map((t) => `- ${t.name}: ${t.description}`)\n            .join(\"\\n\")}`\n        : \"\";\n    const finalMessages: Message[] = toolsDescription\n      ? [\n          { role: \"system\", content: toolsDescription },\n          ...(messages as Message[]),\n        ]\n      : (messages as Message[]);\n    let toolBuffer = \"\";\n\n    try {\n      // \u8C03\u7528 DeepSeek API\n      const response = await fetch(\n        \"https://api.deepseek.com/chat/completions\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${env.DEEPSEEK_API_KEY}`,\n          },\n          body: JSON.stringify({\n            model: \"deepseek-chat\",\n            messages: finalMessages,\n            stream: true,\n            temperature,\n          }),\n        },\n      );\n\n      if (!response.ok) {\n        const error = await response.text();\n        yield { type: \"error\", error: `DeepSeek API Error: ${error}` };\n        return;\n      }\n\n      if (!response.body) {\n        yield { type: \"error\", error: \"Response body is null\" };\n        return;\n      }\n\n      // \u6D41\u5F0F\u8BFB\u53D6\u54CD\u5E94\n      const reader = response.body.getReader();\n      const decoder = new TextDecoder();\n      let buffer = \"\";\n\n      try {\n        while (true) {\n          const { done, value } = await reader.read();\n          if (done) break;\n\n          buffer += decoder.decode(value, { stream: true });\n          const lines = buffer.split(\"\\n\");\n          buffer = lines.pop() || \"\";\n\n          for (const line of lines) {\n            const chunk = parseSSELine(line);\n            if (chunk && chunk.type === \"content\" && chunk.content) {\n              yield { type: \"content\", content: chunk.content };\n              toolBuffer += chunk.content;\n              while (true) {\n                const start = toolBuffer.indexOf(\"<tool>\");\n                const end = toolBuffer.indexOf(\"</tool>\");\n                if (start !== -1 && end !== -1 && end > start) {\n                  const inner = toolBuffer.slice(start + 6, end).trim();\n                  toolBuffer =\n                    toolBuffer.slice(0, start) + toolBuffer.slice(end + 7);\n                  let call: ToolCall | null = null;\n                  try {\n                    const obj = JSON.parse(inner) as {\n                      tool: string;\n                      arguments: Record<string, unknown>;\n                    };\n                    call = {\n                      id: `tool-${Date.now()}`,\n                      name: obj.tool,\n                      arguments: obj.arguments || {},\n                    };\n                  } catch {\n                    call = null;\n                  }\n                  if (call) {\n                    yield { type: \"tool_call\", toolCall: call };\n                    const result = await mcpClient.callTool(\n                      call.name,\n                      call.arguments,\n                    );\n                    yield { type: \"tool_result\", toolResult: result };\n                    yield {\n                      type: \"content\",\n                      content: `\\n[Tool ${call.name} result]\\n${result.content?.slice(0, 1000)}`,\n                    };\n                  }\n                } else {\n                  break;\n                }\n              }\n            }\n          }\n        }\n\n        // \u5904\u7406\u5269\u4F59\u6570\u636E\n        if (buffer.trim()) {\n          const chunk = parseSSELine(buffer.trim());\n          if (chunk && chunk.type === \"content\" && chunk.content) {\n            yield { type: \"content\", content: chunk.content };\n          }\n        }\n      } finally {\n        reader.releaseLock();\n      }\n\n      yield { type: \"complete\" };\n    } catch (error) {\n      yield { type: \"error\", error: String(error) };\n    }\n  },\n};\n\n/**\n * \u89E3\u6790 SSE \u6570\u636E\u884C\n */\nfunction parseSSELine(line: string): SkillStreamChunk | null {\n  const trimmed = line.trim();\n  if (!trimmed || !trimmed.startsWith(\"data: \")) {\n    return null;\n  }\n\n  const data = trimmed.slice(6);\n  if (data === \"[DONE]\") {\n    return null;\n  }\n\n  try {\n    const json = JSON.parse(data);\n    const content = json.choices?.[0]?.delta?.content;\n\n    if (content) {\n      return { type: \"content\", content };\n    }\n  } catch {\n    // \u5FFD\u7565\u89E3\u6790\u9519\u8BEF\n  }\n\n  return null;\n}\n", "/**\n * \u591A\u6A21\u6001 Skill - \u57FA\u4E8E Qwen-VL\n * \u5904\u7406\u56FE\u6587\u5BF9\u8BDD\n */\nimport type {\n  Skill,\n  SkillInput,\n  SkillContext,\n  SkillStreamChunk,\n  Message,\n  ImageData,\n} from \"../types\";\n\nexport const multimodalSkill: Skill = {\n  name: \"multimodal-chat\",\n  type: \"multimodal\",\n  description: \"\u57FA\u4E8E Qwen-VL \u7684\u56FE\u6587\u5BF9\u8BDD\u6280\u80FD\",\n\n  async *execute(\n    input: SkillInput,\n    context: SkillContext,\n  ): AsyncIterable<SkillStreamChunk> {\n    const { env, stepId } = context;\n    const { messages, images = [], temperature = 0.7 } = input;\n\n    if (!env.QWEN_API_KEY) {\n      yield { type: \"error\", error: \"QWEN_API_KEY not configured\" };\n      return;\n    }\n\n    try {\n      // \u6784\u5EFA Qwen-VL \u683C\u5F0F\u7684\u6D88\u606F\n      const qwenMessages = buildQwenMessages(messages, images);\n\n      // \u8C03\u7528 Qwen API - \u4F7F\u7528\u517C\u5BB9 OpenAI \u7684\u683C\u5F0F\n      const response = await fetch(\n        \"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${env.QWEN_API_KEY}`,\n          },\n          body: JSON.stringify({\n            model: \"qwen-vl-plus\",\n            messages: qwenMessages,\n            stream: true,\n            temperature,\n          }),\n        },\n      );\n\n      if (!response.ok) {\n        const error = await response.text();\n        yield { type: \"error\", error: `Qwen API Error: ${error}` };\n        return;\n      }\n\n      if (!response.body) {\n        yield { type: \"error\", error: \"Response body is null\" };\n        return;\n      }\n\n      // \u6D41\u5F0F\u8BFB\u53D6\u54CD\u5E94\n      const reader = response.body.getReader();\n      const decoder = new TextDecoder();\n      let buffer = \"\";\n\n      try {\n        while (true) {\n          const { done, value } = await reader.read();\n          if (done) break;\n\n          buffer += decoder.decode(value, { stream: true });\n          const lines = buffer.split(\"\\n\");\n          buffer = lines.pop() || \"\";\n\n          for (const line of lines) {\n            const chunk = parseQwenSSELine(line);\n            if (chunk) {\n              yield chunk;\n            }\n          }\n        }\n\n        if (buffer.trim()) {\n          const chunk = parseQwenSSELine(buffer.trim());\n          if (chunk) {\n            yield chunk;\n          }\n        }\n      } finally {\n        reader.releaseLock();\n      }\n\n      yield { type: \"complete\" };\n    } catch (error) {\n      yield { type: \"error\", error: String(error) };\n    }\n  },\n};\n\n/**\n * \u6784\u5EFA Qwen-VL \u683C\u5F0F\u7684\u6D88\u606F\n * \u4F7F\u7528 OpenAI \u517C\u5BB9\u683C\u5F0F\n */\nfunction buildQwenMessages(\n  messages: Message[],\n  images: ImageData[],\n): unknown[] {\n  return messages.map((msg) => {\n    if (msg.role === \"user\" && images.length > 0) {\n      // \u591A\u6A21\u6001\u6D88\u606F\u683C\u5F0F - OpenAI \u517C\u5BB9\u683C\u5F0F\n      const content: unknown[] = [];\n\n      // \u6DFB\u52A0\u56FE\u7247\n      for (const img of images) {\n        content.push({\n          type: \"image_url\",\n          image_url: {\n            url: `data:${img.mimeType};base64,${img.base64}`,\n          },\n        });\n      }\n\n      // \u6DFB\u52A0\u6587\u672C\n      content.push({\n        type: \"text\",\n        text: msg.content || \"\u8BF7\u63CF\u8FF0\u8FD9\u5F20\u56FE\u7247\",\n      });\n\n      return {\n        role: msg.role,\n        content,\n      };\n    }\n\n    // \u7EAF\u6587\u672C\u6D88\u606F\n    return {\n      role: msg.role,\n      content: msg.content,\n    };\n  });\n}\n\n/**\n * \u89E3\u6790 Qwen SSE \u6570\u636E\u884C\n */\nfunction parseQwenSSELine(line: string): SkillStreamChunk | null {\n  const trimmed = line.trim();\n  if (!trimmed || !trimmed.startsWith(\"data: \")) {\n    return null;\n  }\n\n  const data = trimmed.slice(6);\n  if (data === \"[DONE]\") {\n    return null;\n  }\n\n  try {\n    const json = JSON.parse(data);\n    // OpenAI \u517C\u5BB9\u683C\u5F0F\u7684\u54CD\u5E94\n    const content =\n      json.choices?.[0]?.delta?.content ||\n      json.choices?.[0]?.message?.content;\n\n    if (content) {\n      return { type: \"content\", content };\n    }\n  } catch {\n    // \u5FFD\u7565\u89E3\u6790\u9519\u8BEF\n  }\n\n  return null;\n}\n", "/**\n * Skill \u6CE8\u518C\u4E2D\u5FC3\n */\nimport type { Skill, SkillType } from '../types';\nimport { textSkill } from './textSkill';\nimport { multimodalSkill } from './multimodalSkill';\n\n// Skill \u6CE8\u518C\u8868\nconst skillRegistry = new Map<string, Skill>();\n\n// \u6CE8\u518C\u9ED8\u8BA4 Skills\nexport function registerDefaultSkills(): void {\n  registerSkill(textSkill);\n  registerSkill(multimodalSkill);\n}\n\n/**\n * \u6CE8\u518C Skill\n */\nexport function registerSkill(skill: Skill): void {\n  skillRegistry.set(skill.name, skill);\n  console.log(`[Skill] Registered: ${skill.name} (${skill.type})`);\n}\n\n/**\n * \u83B7\u53D6 Skill\n */\nexport function getSkill(name: string): Skill | undefined {\n  return skillRegistry.get(name);\n}\n\n/**\n * \u6839\u636E\u8F93\u5165\u81EA\u52A8\u9009\u62E9\u5408\u9002\u7684 Skill\n */\nexport function selectSkill(input: { images?: unknown[]; files?: unknown[] }): Skill {\n  const { images = [], files = [] } = input;\n\n  // \u5982\u679C\u6709\u56FE\u7247\uFF0C\u4F7F\u7528\u591A\u6A21\u6001 Skill\n  if (images.length > 0) {\n    return multimodalSkill;\n  }\n\n  // \u9ED8\u8BA4\u4F7F\u7528\u6587\u672C Skill\n  return textSkill;\n}\n\n/**\n * \u5217\u51FA\u6240\u6709\u53EF\u7528\u7684 Skills\n */\nexport function listSkills(): Skill[] {\n  return Array.from(skillRegistry.values());\n}\n\n// \u521D\u59CB\u5316\nregisterDefaultSkills();\n", "/**\n * MCP (Model Context Protocol) Client\n * \u7BA1\u7406 Tools \u548C Resources\uFF0C\u652F\u6301\u5DE5\u5177\u8C03\u7528\n */\nimport type {\n  MCPClient,\n  MCPTool,\n  MCPResource,\n  ToolResult,\n  ToolCall,\n  Env,\n} from \"../types\";\n\nexport class MCPClientImpl implements MCPClient {\n  tools: Map<string, MCPTool> = new Map();\n  resources: Map<string, MCPResource> = new Map();\n  private env?: Env;\n\n  constructor(env?: Env) {\n    this.env = env;\n    // \u6CE8\u518C\u5185\u7F6E\u5DE5\u5177\n    this.registerBuiltinTools();\n  }\n\n  /**\n   * \u6CE8\u518C\u5185\u7F6E\u5DE5\u5177\n   */\n  private registerBuiltinTools(): void {\n    // \u4EE3\u7801\u6267\u884C\u5DE5\u5177\n    this.registerTool({\n      name: \"execute_code\",\n      description: \"\u6267\u884C JavaScript/TypeScript \u4EE3\u7801\u5E76\u8FD4\u56DE\u7ED3\u679C\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          code: {\n            type: \"string\",\n            description: \"\u8981\u6267\u884C\u7684\u4EE3\u7801\",\n          },\n          language: {\n            type: \"string\",\n            enum: [\"javascript\", \"typescript\"],\n            description: \"\u4EE3\u7801\u8BED\u8A00\",\n          },\n        },\n        required: [\"code\"],\n      },\n    });\n\n    // \u7F51\u9875\u641C\u7D22\u5DE5\u5177\n    this.registerTool({\n      name: \"web_search\",\n      description: \"\u641C\u7D22\u7F51\u9875\u83B7\u53D6\u4FE1\u606F\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          query: {\n            type: \"string\",\n            description: \"\u641C\u7D22\u5173\u952E\u8BCD\",\n          },\n          num_results: {\n            type: \"number\",\n            description: \"\u8FD4\u56DE\u7ED3\u679C\u6570\u91CF\",\n            default: 5,\n          },\n        },\n        required: [\"query\"],\n      },\n    });\n\n    // \u6587\u4EF6\u64CD\u4F5C\u5DE5\u5177\n    this.registerTool({\n      name: \"file_operations\",\n      description: \"\u8BFB\u53D6\u6216\u5199\u5165\u6587\u4EF6\u5185\u5BB9\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          operation: {\n            type: \"string\",\n            enum: [\"read\", \"write\"],\n            description: \"\u64CD\u4F5C\u7C7B\u578B\",\n          },\n          path: {\n            type: \"string\",\n            description: \"\u6587\u4EF6\u8DEF\u5F84\",\n          },\n          content: {\n            type: \"string\",\n            description: \"\u5199\u5165\u5185\u5BB9\uFF08\u4EC5 write \u64CD\u4F5C\u9700\u8981\uFF09\",\n          },\n        },\n        required: [\"operation\", \"path\"],\n      },\n    });\n\n    // \u6570\u5B66\u8BA1\u7B97\u5DE5\u5177\n    this.registerTool({\n      name: \"calculate\",\n      description: \"\u6267\u884C\u6570\u5B66\u8BA1\u7B97\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          expression: {\n            type: \"string\",\n            description: '\u6570\u5B66\u8868\u8FBE\u5F0F\uFF0C\u5982 \"2 + 2\" \u6216 \"Math.sin(30)\"',\n          },\n        },\n        required: [\"expression\"],\n      },\n    });\n\n    // GitHub: \u641C\u7D22\u4ED3\u5E93\n    this.registerTool({\n      name: \"github_search_repositories\",\n      description: \"\u641C\u7D22 GitHub \u4ED3\u5E93\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          q: { type: \"string\", description: \"\u641C\u7D22\u5173\u952E\u8BCD\" },\n          page: { type: \"number\", description: \"\u9875\u7801\", default: 1 },\n          per_page: { type: \"number\", description: \"\u6BCF\u9875\u6570\u91CF\", default: 10 },\n        },\n        required: [\"q\"],\n      },\n    });\n\n    // GitHub: \u83B7\u53D6\u6587\u4EF6\u5185\u5BB9\n    this.registerTool({\n      name: \"github_get_file_contents\",\n      description: \"\u83B7\u53D6 GitHub \u4ED3\u5E93\u6587\u4EF6\u5185\u5BB9\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          owner: { type: \"string\", description: \"\u4ED3\u5E93\u6240\u6709\u8005\" },\n          repo: { type: \"string\", description: \"\u4ED3\u5E93\u540D\" },\n          path: { type: \"string\", description: \"\u6587\u4EF6\u8DEF\u5F84\" },\n          branch: { type: \"string\", description: \"\u5206\u652F\u540D\u79F0\", default: \"main\" },\n        },\n        required: [\"owner\", \"repo\", \"path\"],\n      },\n    });\n\n    // GitHub: \u521B\u5EFA Issue\n    this.registerTool({\n      name: \"github_create_issue\",\n      description: \"\u5728 GitHub \u4ED3\u5E93\u521B\u5EFA Issue\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          owner: { type: \"string\", description: \"\u4ED3\u5E93\u6240\u6709\u8005\" },\n          repo: { type: \"string\", description: \"\u4ED3\u5E93\u540D\" },\n          title: { type: \"string\", description: \"Issue \u6807\u9898\" },\n          body: { type: \"string\", description: \"Issue \u5185\u5BB9\" },\n          assignees: {\n            type: \"array\",\n            description: \"\u6307\u6D3E\u7528\u6237\",\n            items: { type: \"string\" },\n          },\n          labels: {\n            type: \"array\",\n            description: \"\u6807\u7B7E\",\n            items: { type: \"string\" },\n          },\n        },\n        required: [\"owner\", \"repo\", \"title\"],\n      },\n    });\n\n    // GitHub: \u5217\u51FA\u63D0\u4EA4\n    this.registerTool({\n      name: \"github_list_commits\",\n      description: \"\u5217\u51FA\u4ED3\u5E93\u67D0\u5206\u652F\u7684\u63D0\u4EA4\u8BB0\u5F55\",\n      parameters: {\n        type: \"object\",\n        properties: {\n          owner: { type: \"string\", description: \"\u4ED3\u5E93\u6240\u6709\u8005\" },\n          repo: { type: \"string\", description: \"\u4ED3\u5E93\u540D\" },\n          sha: {\n            type: \"string\",\n            description: \"\u5206\u652F\u6216\u63D0\u4EA4 SHA\",\n            default: \"main\",\n          },\n          per_page: { type: \"number\", description: \"\u6BCF\u9875\u6570\u91CF\", default: 10 },\n          page: { type: \"number\", description: \"\u9875\u7801\", default: 1 },\n        },\n        required: [\"owner\", \"repo\"],\n      },\n    });\n  }\n\n  /**\n   * \u6CE8\u518C\u5DE5\u5177\n   */\n  registerTool(tool: MCPTool): void {\n    this.tools.set(tool.name, tool);\n    console.log(`[MCP] Tool registered: ${tool.name}`);\n  }\n\n  /**\n   * \u6CE8\u518C\u8D44\u6E90\n   */\n  registerResource(resource: MCPResource): void {\n    this.resources.set(resource.uri, resource);\n    console.log(`[MCP] Resource registered: ${resource.uri}`);\n  }\n\n  /**\n   * \u5217\u51FA\u6240\u6709\u5DE5\u5177\n   */\n  listTools(): MCPTool[] {\n    return Array.from(this.tools.values());\n  }\n\n  /**\n   * \u8C03\u7528\u5DE5\u5177\n   */\n  async callTool(\n    name: string,\n    args: Record<string, unknown>,\n  ): Promise<ToolResult> {\n    const tool = this.tools.get(name);\n    if (!tool) {\n      return {\n        toolCallId: name,\n        content: `Tool \"${name}\" not found`,\n        isError: true,\n      };\n    }\n\n    try {\n      const result = await this.executeTool(name, args);\n      return {\n        toolCallId: name,\n        content: result,\n        isError: false,\n      };\n    } catch (error) {\n      return {\n        toolCallId: name,\n        content: String(error),\n        isError: true,\n      };\n    }\n  }\n\n  /**\n   * \u6267\u884C\u5177\u4F53\u5DE5\u5177\u903B\u8F91\n   */\n  private async executeTool(\n    name: string,\n    args: Record<string, unknown>,\n  ): Promise<string> {\n    switch (name) {\n      case \"execute_code\": {\n        const code = args.code as string;\n        // \u6CE8\u610F\uFF1A\u5B9E\u9645\u73AF\u5883\u4E2D\u9700\u8981\u6C99\u7BB1\u6267\u884C\n        return `[Code execution simulated]\\nCode: ${code.slice(0, 100)}...`;\n      }\n\n      case \"web_search\": {\n        const query = args.query as string;\n        const numResults = (args.num_results as number) || 5;\n        // \u6A21\u62DF\u641C\u7D22\u7ED3\u679C\n        return `[Web search simulated]\\nQuery: \"${query}\"\\nFound ${numResults} results`;\n      }\n\n      case \"file_operations\": {\n        const operation = args.operation as string;\n        const path = args.path as string;\n        if (operation === \"read\") {\n          return `[File read simulated]\\nPath: ${path}`;\n        } else {\n          const content = args.content as string;\n          return `[File write simulated]\\nPath: ${path}\\nContent: ${content?.slice(0, 50)}...`;\n        }\n      }\n\n      case \"calculate\": {\n        const expression = args.expression as string;\n        try {\n          // \u7B80\u5355\u7684\u5B89\u5168\u8BA1\u7B97\uFF08\u5B9E\u9645\u5E94\u4F7F\u7528\u66F4\u5B89\u5168\u7684\u8BA1\u7B97\u5E93\uFF09\n          const result = Function(\n            '\"use strict\"; return (' + expression + \")\",\n          )();\n          return `Result: ${result}`;\n        } catch {\n          return `Error: Invalid expression \"${expression}\"`;\n        }\n      }\n\n      // GitHub: \u641C\u7D22\u4ED3\u5E93\n      case \"github_search_repositories\": {\n        const q = args.q as string;\n        const per_page = (args.per_page as number) || 10;\n        const page = (args.page as number) || 1;\n        const url = `https://api.github.com/search/repositories?q=${encodeURIComponent(q)}&per_page=${per_page}&page=${page}`;\n        const headers: Record<string, string> = {\n          Accept: \"application/vnd.github+json\",\n        };\n        if (this.env?.GITHUB_TOKEN) {\n          headers[\"Authorization\"] = `Bearer ${this.env.GITHUB_TOKEN}`;\n        }\n        const resp = await fetch(url, { headers });\n        const json = await resp.json();\n        return JSON.stringify(json);\n      }\n\n      // GitHub: \u83B7\u53D6\u6587\u4EF6\u5185\u5BB9\n      case \"github_get_file_contents\": {\n        const owner = args.owner as string;\n        const repo = args.repo as string;\n        const path = args.path as string;\n        const branch = (args.branch as string) || \"main\";\n        const url = `https://api.github.com/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}?ref=${encodeURIComponent(branch)}`;\n        const headers: Record<string, string> = {\n          Accept: \"application/vnd.github+json\",\n        };\n        if (this.env?.GITHUB_TOKEN) {\n          headers[\"Authorization\"] = `Bearer ${this.env.GITHUB_TOKEN}`;\n        }\n        const resp = await fetch(url, { headers });\n        const json = await resp.json();\n        // \u82E5\u4E3A\u6587\u4EF6\u5185\u5BB9\uFF0C\u5C1D\u8BD5\u89E3\u7801 base64\n        if (json && json.content && json.encoding === \"base64\") {\n          try {\n            const decoded = atob(json.content.replace(/\\n/g, \"\"));\n            return JSON.stringify({\n              name: json.name,\n              path: json.path,\n              content: decoded.slice(0, 5000),\n            });\n          } catch {\n            return JSON.stringify(json);\n          }\n        }\n        return JSON.stringify(json);\n      }\n\n      // GitHub: \u521B\u5EFA Issue\n      case \"github_create_issue\": {\n        const owner = args.owner as string;\n        const repo = args.repo as string;\n        const title = args.title as string;\n        const body = (args.body as string) || \"\";\n        const assignees = (args.assignees as string[]) || [];\n        const labels = (args.labels as string[]) || [];\n        if (!this.env?.GITHUB_TOKEN) {\n          return \"Error: GITHUB_TOKEN not configured\";\n        }\n        const url = `https://api.github.com/repos/${owner}/${repo}/issues`;\n        const resp = await fetch(url, {\n          method: \"POST\",\n          headers: {\n            Accept: \"application/vnd.github+json\",\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${this.env.GITHUB_TOKEN}`,\n          },\n          body: JSON.stringify({ title, body, assignees, labels }),\n        });\n        const json = await resp.json();\n        return JSON.stringify(json);\n      }\n\n      // GitHub: \u5217\u51FA\u63D0\u4EA4\n      case \"github_list_commits\": {\n        const owner = args.owner as string;\n        const repo = args.repo as string;\n        const sha = (args.sha as string) || \"main\";\n        const per_page = (args.per_page as number) || 10;\n        const page = (args.page as number) || 1;\n        const url = `https://api.github.com/repos/${owner}/${repo}/commits?sha=${encodeURIComponent(sha)}&per_page=${per_page}&page=${page}`;\n        const headers: Record<string, string> = {\n          Accept: \"application/vnd.github+json\",\n        };\n        if (this.env?.GITHUB_TOKEN) {\n          headers[\"Authorization\"] = `Bearer ${this.env.GITHUB_TOKEN}`;\n        }\n        const resp = await fetch(url, { headers });\n        const json = await resp.json();\n        return JSON.stringify(json);\n      }\n\n      default:\n        return `Tool \"${name}\" execution not implemented`;\n    }\n  }\n\n  /**\n   * \u83B7\u53D6\u5DE5\u5177\u63CF\u8FF0\uFF08\u7528\u4E8E Prompt\uFF09\n   */\n  getToolsDescription(): string {\n    const tools = this.listTools();\n    if (tools.length === 0) return \"\";\n\n    return `\\n\\nYou have access to the following tools:\\n${tools\n      .map(\n        (tool) =>\n          `- ${tool.name}: ${tool.description}\\n  Parameters: ${JSON.stringify(\n            tool.parameters,\n          )}`,\n      )\n      .join(\"\\n\")}\\n\\nTo use a tool, respond with: <tool>${JSON.stringify({\n      tool: \"tool_name\",\n      arguments: {},\n    })}</tool>`;\n  }\n}\n\n/**\n * \u521B\u5EFA MCP Client \u5B9E\u4F8B\n */\nexport function createMCPClient(env?: Env): MCPClient {\n  return new MCPClientImpl(env);\n}\n", "/**\n * ID \u751F\u6210\u5DE5\u5177\n */\n\n/**\n * \u751F\u6210\u552F\u4E00 ID\n * \u683C\u5F0F: timestamp-random\n */\nexport function generateId(): string {\n  const timestamp = Date.now().toString(36);\n  const random = Math.random().toString(36).substring(2, 9);\n  return `${timestamp}-${random}`;\n}\n\n/**\n * \u751F\u6210 Task ID\n */\nexport function generateTaskId(): string {\n  return `task-${generateId()}`;\n}\n\n/**\n * \u751F\u6210 Step ID\n */\nexport function generateStepId(): string {\n  return `step-${generateId()}`;\n}\n", "/**\n * Task Manager\n * \u7BA1\u7406 Task \u751F\u547D\u5468\u671F\uFF0C\u534F\u8C03 Step \u6267\u884C\n */\nimport type { Task, Step, TaskStatus, StepStatus, StepType, ChatRequest, Env } from '../types';\nimport { selectSkill, getSkill } from '../skills';\nimport { createMCPClient } from '../mcp/client';\nimport { generateId } from '../utils/id';\n\nexport class TaskManager {\n  private tasks: Map<string, Task> = new Map();\n  private env: Env;\n\n  constructor(env: Env) {\n    this.env = env;\n  }\n\n  /**\n   * \u521B\u5EFA\u65B0 Task\n   */\n  createTask(request: ChatRequest): Task {\n    const taskId = generateId();\n    const now = Date.now();\n\n    const task: Task = {\n      id: taskId,\n      type: this.determineTaskType(request),\n      status: 'pending',\n      userMessage: request.messages[request.messages.length - 1]?.content || '',\n      steps: [],\n      createdAt: now,\n      updatedAt: now,\n    };\n\n    this.tasks.set(taskId, task);\n    return task;\n  }\n\n  /**\n   * \u786E\u5B9A Task \u7C7B\u578B\n   */\n  private determineTaskType(request: ChatRequest): Task['type'] {\n    if (request.images && request.images.length > 0) return 'image';\n    if (request.files && request.files.length > 0) return 'file';\n    if (request.enableTools) return 'code';\n    return 'chat';\n  }\n\n  /**\n   * \u6267\u884C Task\n   */\n  async *executeTask(taskId: string, request: ChatRequest): AsyncIterable<{\n    type: 'task' | 'step' | 'content' | 'error' | 'complete';\n    data: unknown;\n  }> {\n    const task = this.tasks.get(taskId);\n    if (!task) {\n      yield { type: 'error', data: { message: 'Task not found' } };\n      return;\n    }\n\n    // \u66F4\u65B0 Task \u72B6\u6001\n    task.status = 'running';\n    task.updatedAt = Date.now();\n    yield { type: 'task', data: { task, event: 'started' } };\n\n    try {\n      // Step 1: \u89C4\u5212 (Plan)\n      const planStep = this.createStep(taskId, 'plan', '\u5206\u6790\u9700\u6C42', '\u7406\u89E3\u7528\u6237\u610F\u56FE\u5E76\u89C4\u5212\u6267\u884C\u6B65\u9AA4');\n      yield { type: 'step', data: { step: planStep, event: 'start' } };\n      \n      // \u7B80\u5355\u89C4\u5212\u903B\u8F91\n      const needsMultimodal = !!(request.images && request.images.length > 0);\n      const needsTools = !!request.enableTools;\n      \n      planStep.status = 'completed';\n      planStep.output = { needsMultimodal, needsTools };\n      planStep.completedAt = Date.now();\n      yield { type: 'step', data: { step: planStep, event: 'complete' } };\n\n      // Step 2: \u6267\u884C Skill\n      const skillStep = this.createStep(\n        taskId,\n        'skill',\n        needsMultimodal ? '\u591A\u6A21\u6001\u5904\u7406' : '\u6587\u672C\u5BF9\u8BDD',\n        needsMultimodal ? '\u8C03\u7528 Qwen-VL \u5904\u7406\u56FE\u6587' : '\u8C03\u7528 DeepSeek \u751F\u6210\u56DE\u590D'\n      );\n      yield { type: 'step', data: { step: skillStep, event: 'start' } };\n\n      // \u9009\u62E9\u5E76\u6267\u884C Skill\n      const skill = selectSkill(request);\n      const mcpClient = createMCPClient(this.env);\n\n      let fullContent = '';\n\n      for await (const chunk of skill.execute(\n        {\n          messages: request.messages,\n          images: request.images,\n          files: request.files,\n          temperature: request.temperature,\n        },\n        {\n          taskId,\n          stepId: skillStep.id,\n          env: this.env,\n          mcpClient,\n        }\n      )) {\n        if (chunk.type === 'content') {\n          fullContent += chunk.content;\n          yield { type: 'content', data: { content: chunk.content } };\n        } else if (chunk.type === 'error') {\n          skillStep.status = 'failed';\n          skillStep.error = chunk.error;\n          yield { type: 'step', data: { step: skillStep, event: 'error' } };\n          throw new Error(chunk.error);\n        }\n      }\n\n      skillStep.status = 'completed';\n      skillStep.output = { content: fullContent };\n      skillStep.completedAt = Date.now();\n      yield { type: 'step', data: { step: skillStep, event: 'complete' } };\n\n      // Step 3: \u54CD\u5E94 (Respond)\n      const respondStep = this.createStep(taskId, 'respond', '\u751F\u6210\u54CD\u5E94', '\u6574\u7406\u5E76\u8FD4\u56DE\u6700\u7EC8\u7ED3\u679C');\n      yield { type: 'step', data: { step: respondStep, event: 'start' } };\n\n      task.result = fullContent;\n      task.status = 'completed';\n      task.updatedAt = Date.now();\n\n      respondStep.status = 'completed';\n      respondStep.output = { result: fullContent };\n      respondStep.completedAt = Date.now();\n      yield { type: 'step', data: { step: respondStep, event: 'complete' } };\n\n      // \u5B8C\u6210\n      yield { type: 'complete', data: { task } };\n\n    } catch (error) {\n      task.status = 'failed';\n      task.error = String(error);\n      task.updatedAt = Date.now();\n      yield { type: 'error', data: { error: String(error), task } };\n    }\n  }\n\n  /**\n   * \u521B\u5EFA Step\n   */\n  private createStep(\n    taskId: string,\n    type: StepType,\n    name: string,\n    description?: string\n  ): Step {\n    const step: Step = {\n      id: generateId(),\n      taskId,\n      type,\n      status: 'running',\n      name,\n      description,\n      startedAt: Date.now(),\n    };\n\n    const task = this.tasks.get(taskId);\n    if (task) {\n      task.steps.push(step);\n    }\n\n    return step;\n  }\n\n  /**\n   * \u83B7\u53D6 Task\n   */\n  getTask(taskId: string): Task | undefined {\n    return this.tasks.get(taskId);\n  }\n\n  /**\n   * \u5217\u51FA\u6240\u6709 Task\n   */\n  listTasks(): Task[] {\n    return Array.from(this.tasks.values());\n  }\n}\n", "/**\n * Worker Entry Point\n * Task \u2192 Step \u2192 Skill + MCP Client \u67B6\u6784\n * SSE \u6D41\u5F0F\u8FD4\u56DE\n */\nimport type { Env, ChatRequest } from \"./types\";\nimport { TaskManager } from \"./core/taskManager\";\n\nexport { Env } from \"./types\";\n\nexport default {\n  async fetch(request: Request, env: Env, ctx?: any): Promise<Response> {\n    // \u5904\u7406 CORS\n    if (request.method === \"OPTIONS\") {\n      return new Response(null, {\n        headers: {\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\": \"POST, OPTIONS\",\n          \"Access-Control-Allow-Headers\": \"Content-Type\",\n        },\n      });\n    }\n\n    if (request.method !== \"POST\") {\n      return new Response(\"Method Not Allowed\", { status: 405 });\n    }\n\n    try {\n      // \u89E3\u6790\u8BF7\u6C42\n      const body = (await request.json()) as ChatRequest;\n      const { messages = [], stream = true, images, files, enableTools } = body;\n\n      if (!messages.length) {\n        return new Response(\n          JSON.stringify({ error: \"Messages are required\" }),\n          {\n            status: 400,\n            headers: {\n              \"Content-Type\": \"application/json\",\n              \"Access-Control-Allow-Origin\": \"*\",\n            },\n          },\n        );\n      }\n\n      // \u521B\u5EFA TaskManager\n      const taskManager = new TaskManager(env);\n\n      // \u521B\u5EFA Task\n      const requestData: ChatRequest = {\n        messages,\n        images,\n        files,\n        enableTools,\n        temperature: body.temperature || 0.7,\n        stream,\n      };\n\n      const task = taskManager.createTask(requestData);\n\n      // \u5982\u679C\u4E0D\u4F7F\u7528\u6D41\u5F0F\u54CD\u5E94\uFF0C\u76F4\u63A5\u8FD4\u56DE\u5B8C\u6574\u7ED3\u679C\n      if (!stream) {\n        const chunks: unknown[] = [];\n        for await (const chunk of taskManager.executeTask(\n          task.id,\n          requestData,\n        )) {\n          chunks.push(chunk);\n        }\n\n        const finalTask = taskManager.getTask(task.id);\n        return new Response(JSON.stringify({ task: finalTask, chunks }), {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Access-Control-Allow-Origin\": \"*\",\n          },\n        });\n      }\n\n      // \u6D41\u5F0F\u54CD\u5E94\n      const { readable, writable } = new TransformStream();\n      const writer = writable.getWriter();\n      const encoder = new TextEncoder();\n\n      // \u5F02\u6B65\u6267\u884C Task \u5E76\u5199\u5165\u6D41\n      const executeTask = async () => {\n        try {\n          for await (const event of taskManager.executeTask(\n            task.id,\n            requestData,\n          )) {\n            const data = `data: ${JSON.stringify(event)}\\n\\n`;\n            await writer.write(encoder.encode(data));\n          }\n\n          // \u53D1\u9001\u5B8C\u6210\u6807\u8BB0\n          await writer.write(encoder.encode(\"data: [DONE]\\n\\n\"));\n        } catch (error) {\n          const errorEvent = {\n            type: \"error\",\n            data: { error: String(error) },\n          };\n          await writer.write(\n            encoder.encode(`data: ${JSON.stringify(errorEvent)}\\n\\n`),\n          );\n        } finally {\n          await writer.close();\n        }\n      };\n\n      // \u542F\u52A8\u5F02\u6B65\u6267\u884C\n      executeTask();\n\n      // \u8FD4\u56DE SSE \u54CD\u5E94\n      return new Response(readable, {\n        headers: {\n          \"Content-Type\": \"text/event-stream\",\n          \"Cache-Control\": \"no-cache\",\n          Connection: \"keep-alive\",\n          \"Access-Control-Allow-Origin\": \"*\",\n        },\n      });\n    } catch (error) {\n      return new Response(JSON.stringify({ error: String(error) }), {\n        status: 500,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n        },\n      });\n    }\n  },\n};\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"C:\\\\Users\\\\hulian\\\\Desktop\\\\huliang\\\\ai-tool-chat\\\\packages\\\\worker\\\\src\\\\index.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"C:\\\\Users\\\\hulian\\\\Desktop\\\\huliang\\\\ai-tool-chat\\\\node_modules\\\\.pnpm\\\\wrangler@4.60.0\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"C:\\\\Users\\\\hulian\\\\Desktop\\\\huliang\\\\ai-tool-chat\\\\node_modules\\\\.pnpm\\\\wrangler@4.60.0\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"C:\\\\Users\\\\hulian\\\\Desktop\\\\huliang\\\\ai-tool-chat\\\\packages\\\\worker\\\\src\\\\index.ts\";\n\t\t\t\tconst MIDDLEWARE_TEST_INJECT = \"__INJECT_FOR_TESTING_WRANGLER_MIDDLEWARE__\";\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"C:\\\\Users\\\\hulian\\\\Desktop\\\\huliang\\\\ai-tool-chat\\\\packages\\\\worker\\\\.wrangler\\\\tmp\\\\bundle-9kgNdD\\\\middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"C:\\\\Users\\\\hulian\\\\Desktop\\\\huliang\\\\ai-tool-chat\\\\node_modules\\\\.pnpm\\\\wrangler@4.60.0\\\\node_modules\\\\wrangler\\\\templates\\\\middleware\\\\common.ts\";\nimport type { WorkerEntrypointConstructor } from \"C:\\\\Users\\\\hulian\\\\Desktop\\\\huliang\\\\ai-tool-chat\\\\packages\\\\worker\\\\.wrangler\\\\tmp\\\\bundle-9kgNdD\\\\middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"C:\\\\Users\\\\hulian\\\\Desktop\\\\huliang\\\\ai-tool-chat\\\\packages\\\\worker\\\\.wrangler\\\\tmp\\\\bundle-9kgNdD\\\\middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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",
  "names": []
}
